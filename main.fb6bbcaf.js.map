{"version":3,"sources":["js/main.js"],"names":["r","from","to","Math","random","pick","arguments","length","getChar","loop","fn","delay","stamp","Date","now","_loop","requestAnimationFrame","Char","element","document","createElement","mutate","classList","Trail","list","options","Object","assign","size","offset","body","move","forEach","n","i","last","item","push","Rain","target","row","build","appendChild","drop","root","createDocumentFragment","chars","c","trail","len","traverse","style","main","querySelector","$","eq","clone","prependTo"],"mappings":"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","file":"main.fb6bbcaf.js","sourceRoot":"..","sourcesContent":["function r(from, to) {\n  return ~~(Math.random() * (to - from + 1) + from);\n}\nfunction pick() {\n  return arguments[r(0, arguments.length - 1)];\n}\nfunction getChar() {\n  // return String.fromCharCode(\n  //   pick(r(0x3041, 0x30ff), r(0x2000, 0x206f), r(0x0020, 0x003f))\n  // );\n  return pick(\n    \"sym-btc-s\",\n    \"sym-eth-s\",\n    \"sym-ltc-s\",\n    \"exc-uniswap-v2-s\",\n    \"sym-doge-s\",\n    \"sym-ada-s\",\n    \"sym-xrpx-s\",\n    \"sym-bnb-s\",\n    \"sym-link-s\",\n    \"sym-shib\",\n    \"sym-fil-s\",\n    \"sym-icp-s\",\n    \"sym-xlm-s\",\n    \"sym-xmr-s\",\n    \"sym-aave-s\",\n    \"sym-lend-s\"\n  );\n}\nfunction loop(fn, delay) {\n  let stamp = Date.now();\n  function _loop() {\n    if (Date.now() - stamp >= delay) {\n      fn();\n      stamp = Date.now();\n    }\n    requestAnimationFrame(_loop);\n  }\n  requestAnimationFrame(_loop);\n}\nclass Char {\n  constructor() {\n    this.element = document.createElement(\"i\");\n    this.mutate();\n  }\n  mutate() {\n    // this.element.textContent = getChar();\n    this.element.classList = \"beacon \" + getChar();\n  }\n}\nclass Trail {\n  constructor(list = [], options) {\n    this.list = list;\n    this.options = Object.assign({ size: 10, offset: 0 }, options);\n    this.body = [];\n    this.move();\n  }\n  traverse(fn) {\n    this.body.forEach((n, i) => {\n      let last = i == this.body.length - 1;\n      if (n) fn(n, i, last);\n    });\n  }\n  move() {\n    this.body = [];\n    let { offset, size } = this.options;\n    for (let i = 0; i < size; ++i) {\n      let item = this.list[offset + i - size + 1];\n      this.body.push(item);\n    }\n    this.options.offset = (offset + 1) % (this.list.length + size - 1);\n  }\n}\nclass Rain {\n  constructor({ target, row }) {\n    this.element = document.createElement(\"p\");\n    this.build(row);\n    if (target) {\n      target.appendChild(this.element);\n    }\n    this.drop();\n  }\n  build(row = 20) {\n    let root = document.createDocumentFragment();\n    let chars = [];\n    for (let i = 0; i < row; ++i) {\n      let c = new Char();\n      root.appendChild(c.element);\n      chars.push(c);\n      if (Math.random() < 0.5) {\n        loop(() => c.mutate(), r(1e3, 5e3));\n      }\n    }\n    this.trail = new Trail(chars, {\n      size: r(10, 30),\n      offset: r(0, 100),\n    });\n    this.element.appendChild(root);\n  }\n  drop() {\n    let trail = this.trail;\n    let len = trail.body.length;\n    let delay = r(10, 100);\n    loop(() => {\n      trail.move();\n      trail.traverse((c, i, last) => {\n        c.element.style = `\n          color: hsl(32, 100%, ${(85 / len) * (i + 1)}%);\n        `;\n        if (last) {\n          c.mutate();\n          c.element.style = `\n            color: hsl(32, 100%, 85%);\n            text-shadow:\n              0 0 .5em #fff,\n              0 0 .5em currentColor;\n          `;\n        }\n      });\n    }, delay);\n  }\n}\n\nconst main = document.querySelector(\"main\");\nfor (let i = 0; i < 50; ++i) {\n  new Rain({ target: main, row: 50 });\n}\n\n$(function () {\n  for (i = 0; i < 4; i++) {\n    $(\".glitch .text span\").eq(0).clone().prependTo(\".glitch .text\");\n  }\n});\n"]}
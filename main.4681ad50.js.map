{"version":3,"sources":["js/main.js"],"names":["r","from","to","Math","random","pick","arguments","length","getChar","loop","fn","delay","stamp","Date","now","requestAnimationFrame","_loop","Char","element","document","createElement","mutate","classList","Trail","list","options","Object","assign","size","offset","body","move","forEach","n","i","last","item","push","Rain","target","row","build","appendChild","drop","root","createDocumentFragment","chars","c","trail","len","traverse","style","main","querySelector","$","eq","clone","prependTo"],"mappings":"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","file":"main.4681ad50.js","sourceRoot":"..","sourcesContent":["function r(from, to) {\n  return ~~(Math.random() * (to - from + 1) + from);\n}\nfunction pick() {\n  return arguments[r(0, arguments.length - 1)];\n}\nfunction getChar() {\n  // return String.fromCharCode(\n  //   pick(r(0x3041, 0x30ff), r(0x2000, 0x206f), r(0x0020, 0x003f))\n  // );\n  return pick(\n    \"sym-btc-s\",\n    \"sym-eth-s\",\n    \"sym-ltc-s\",\n    \"exc-uniswap-v2-s\",\n    \"sym-doge-s\",\n    \"sym-ada-s\",\n    \"sym-xrpx-s\",\n    \"sym-bnb-s\",\n    \"sym-link-s\",\n    \"sym-shib\",\n    \"sym-fil-s\",\n    \"sym-icp-s\",\n    \"sym-xlm-s\",\n    \"sym-xmr-s\",\n    \"sym-aave-s\",\n    \"sym-lend-s\"\n  );\n}\nfunction loop(fn, delay) {\n  let stamp = Date.now();\n  function _loop() {\n    if (Date.now() - stamp >= delay) {\n      fn();\n      stamp = Date.now();\n    }\n    requestAnimationFrame(_loop);\n  }\n  requestAnimationFrame(_loop);\n}\nclass Char {\n  constructor() {\n    this.element = document.createElement(\"i\");\n    this.mutate();\n  }\n  mutate() {\n    // this.element.textContent = getChar();\n    this.element.classList = \"beacon \" + getChar();\n  }\n}\nclass Trail {\n  constructor(list = [], options) {\n    this.list = list;\n    this.options = Object.assign({ size: 10, offset: 0 }, options);\n    this.body = [];\n    this.move();\n  }\n  traverse(fn) {\n    this.body.forEach((n, i) => {\n      let last = i == this.body.length - 1;\n      if (n) fn(n, i, last);\n    });\n  }\n  move() {\n    this.body = [];\n    let { offset, size } = this.options;\n    for (let i = 0; i < size; ++i) {\n      let item = this.list[offset + i - size + 1];\n      this.body.push(item);\n    }\n    this.options.offset = (offset + 1) % (this.list.length + size - 1);\n  }\n}\nclass Rain {\n  constructor({ target, row }) {\n    this.element = document.createElement(\"p\");\n    this.build(row);\n    if (target) {\n      target.appendChild(this.element);\n    }\n    this.drop();\n  }\n  build(row = 20) {\n    let root = document.createDocumentFragment();\n    let chars = [];\n    for (let i = 0; i < row; ++i) {\n      let c = new Char();\n      root.appendChild(c.element);\n      chars.push(c);\n      if (Math.random() < 0.5) {\n        loop(() => c.mutate(), r(1e3, 5e3));\n      }\n    }\n    this.trail = new Trail(chars, {\n      size: r(10, 30),\n      offset: r(0, 100),\n    });\n    this.element.appendChild(root);\n  }\n  drop() {\n    let trail = this.trail;\n    let len = trail.body.length;\n    let delay = r(10, 100);\n    loop(() => {\n      trail.move();\n      trail.traverse((c, i, last) => {\n        c.element.style = `\n          color: hsl(32, 100%, ${(85 / len) * (i + 1)}%);\n        `;\n        if (last) {\n          c.mutate();\n          c.element.style = `\n            color: hsl(32, 100%, 85%);\n            text-shadow:\n              0 0 .5em #fff,\n              0 0 .5em currentColor;\n          `;\n        }\n      });\n    }, delay);\n  }\n}\n\nconst main = document.querySelector(\"main\");\nfor (let i = 0; i < 50; ++i) {\n  new Rain({ target: main, row: 50 });\n}\n\n$(function () {\n  for (i = 0; i < 4; i++) {\n    $(\".glitch .text span\").eq(0).clone().prependTo(\".glitch .text\");\n  }\n});\n"]}